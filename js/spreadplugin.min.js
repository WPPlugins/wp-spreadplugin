/**
 * Plugin Name: WP-Spreadplugin
 * Plugin URI: http://wordpress.org/extend/plugins/wp-spreadplugin/
 * Description: This plugin uses the Spreadshirt API to list articles and let your customers order articles of your Spreadshirt shop using Spreadshirt order process.
 * Version: 3.9.39
 * Author: Thimo Grauerholz
 */

var ajax_object;jQuery(function(a){function l(){a(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").unbind(),a(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").unbind(),a(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").unbind(),a(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .product-description-wrapper div.header").unbind(),a(".spreadplugin-design .image-wrapper").unbind(),a(".spreadplugin-article form,.spreadplugin-article-detail form").unbind(),a(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").unbind(),a(".spreadplugin-article .edit-wrapper-integrated a,.spreadplugin-article-detail .edit-wrapper-integrated a").unbind(),a(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").unbind(),a(".spreadplugin-article .image-wrapper,.spreadplugin-article-detail .image-wrapper").unbind(),a(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").unbind(),a(".spreadplugin-article .colors li,.spreadplugin-article-detail .colors li").click(function(){var b="#"+a(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),c=a(b+" img.preview"),e=(c.attr("src"),c.attr("data-zoom-image")),f=c.data("elevateZoom");if(h=a(this).attr("value"),i=a(b+" #view").val(),a(b+" #appearance").val(h),c.attr("src",c.attr("src").replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+h),c.attr("data-zoom-image",e.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+h+",viewId="+i),a(b+" img.previewview").each(function(){var b=a(this).attr("src");a(this).attr("src",b.replace(/\,appearanceId=(\d+)/g,"")+",appearanceId="+h)}),f){var g=f.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");g=g+",appearanceId="+h+",viewId="+i,f.imageSrc=g,f.zoomImage=g,f.currentImage=g,f.zoomWindow&&f.zoomWindow.css({backgroundImage:"url('"+g+"')"}),f.zoomLens&&f.zoomLens.css({backgroundImage:"url('"+g+"')"})}}),a(".spreadplugin-article .views li,.spreadplugin-article-detail .views li").click(function(){var b="#"+a(this).closest(".spreadplugin-article,.spreadplugin-article-detail").attr("id"),c=a(b+" img.preview"),d=c.attr("src"),e=c.attr("data-zoom-image"),f=c.data("elevateZoom");if(i=a(this).attr("value"),h=a(b+" #appearance").val(),a(b+" #view").val(i),c.attr("src",d.replace(/\,viewId=(\d+)/g,"")+",viewId="+i),c.attr("data-zoom-image",e.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"")+",appearanceId="+h+",viewId="+i),f){var g=f.imageSrc.replace(/\,appearanceId=(\d+)/g,"").replace(/\,viewId=(\d+)/g,"");g=g+",appearanceId="+h+",viewId="+i,f.imageSrc=g,f.zoomImage=g,f.currentImage=g,f.zoomWindow&&f.zoomWindow.css({backgroundImage:"url('"+g+"')"}),f.zoomLens&&f.zoomLens.css({backgroundImage:"url('"+g+"')"})}}),a(".spreadplugin-article .description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var b=a(this).parent().parent().parent(),c=a(this).next();c.is(":hidden")?(b.addClass("activeDescription"),c.show(),a(this).children("a").html(ajax_object.textHideDesc)):(b.removeClass("activeDescription"),a(".description-wrapper div.description").hide(),a(".description-wrapper div.header a").html(ajax_object.textShowDesc))}),a(".spreadplugin-article .product-description-wrapper div.header,.spreadplugin-article-detail .description-wrapper div.header").click(function(){var b=a(this).parent().parent().parent(),c=a(this).next();c.is(":hidden")?(b.addClass("activeDescription"),c.show(),a(this).children("a").html(ajax_object.textProdHideDesc)):(b.removeClass("activeDescription"),a(".product-description-wrapper div.description").hide(),a(".product-description-wrapper div.header a").html(ajax_object.textProdShowDesc))}),a(".spreadplugin-article form,.spreadplugin-article-detail form").submit(function(b){b.preventDefault();var c=a(this).serialize()+"&action=myAjax",d=this,e=a("#"+d.id+" input[type=submit]").not(".add-basket-button"),f=d.id.split("_"),g=f[1];a("#previewimg_"+g).width()/3,a("#previewimg_"+g).height()/3,a("#previewimg_"+g).offset().left,a("#previewimg_"+g).offset().top,a(".spreadplugin-checkout").offset().left,a(".spreadplugin-checkout").offset().top;return e.val(ajax_object.textButtonAdded),a(this).find(".add-basket-button").parent().append('<img src="'+ajax_object.loadingImage+'" class="spreadplugin-loading product'+g+'" />'),a.post(ajax_object.ajaxLocation,c,function(b){1==b.c.m?e.val(ajax_object.textButtonAdd):e.val(ajax_object.textButtonFailed),p(b),a("img.spreadplugin-loading.product"+g).remove()},"json"),!1}),a(".spreadplugin-article .shipping-window,.spreadplugin-article-detail .shipping-window").magnificPopup({items:{src:"#spreadplugin-shipment-wrapper"},type:"inline",callbacks:{open:function(){a("#spreadplugin-shipment-wrapper").show(),a("#spreadplugin-shipment-wrapper").parent(".mfp-content").css("width",400)},close:function(){a("#spreadplugin-shipment-wrapper").hide()}}}),a(".spreadplugin-article .edit-wrapper-integrated,.spreadplugin-article-detail .edit-wrapper-integrated").click(function(){var c=(a(this).data("designid"),a(this).data("productid")),f=(a(this).data("viewid"),a(this).data("appearanceid"),a(this).data("producttypeid"));a.magnificPopup.open({items:{type:"inline",src:"#spreadplugin-designer-wrapper"},callbacks:{open:function(){a(".mfp-iframe-holder .mfp-content").css("height",a(window).height()-200),q(c,f)},resize:function(){a(".mfp-iframe-holder .mfp-content").css("height",a(window).height()-200)},close:function(){a("#spreadplugin-designer").html("")}}})}),2==ajax_object.pageCheckoutUseIframe&&(a(".spreadplugin-article .edit-wrapper a,.spreadplugin-article-detail .edit-wrapper a").magnificPopup({type:"iframe",callbacks:{open:function(){a(".mfp-iframe-holder .mfp-content").css("height",a(window).height()-200)},resize:function(){a(".mfp-iframe-holder .mfp-content").css("height",a(window).height()-200)}}}),a(".spreadplugin-article .details-wrapper a,.spreadplugin-article-detail .details-wrapper a").magnificPopup({type:"iframe",preloader:!0})),a(".spreadplugin-design .image-wrapper").click(function(){var b=a(this).parent().attr("id");b="#"+b.replace("design","designContainer"),a(b).is(":hidden")?(a(b).addClass("active"),a(b).slideDown("slow")):a("#spreadplugin-list .design-container").slideUp("slow",function(){a(this).removeClass("active")})})}function m(){a(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").unbind(),a("div.spreadplugin-article.min-view").unbind(),a(".spreadplugin-design div.image-wrapper").each(function(){a(this).hover(function(){a(this).find(".img-caption").stop(!0).css("display","inline-block").animate({top:-50},{queue:!1,duration:400})},function(){a(this).find(".img-caption").stop(!0).hide().animate({top:0})})}),1==ajax_object.zoomActivated&&a(".spreadplugin-article img.preview,.spreadplugin-article-detail img.preview").hover(function(){a(this).elevateZoom(ajax_object.zoomConfig)}),a(".spreadplugin-article ul.soc-icons a,.spreadplugin-article-detail ul.soc-icons a").hover(function(){a(this).parent().css("background-color",a(this).attr("data-color"))},function(){a(this).parent().removeAttr("style")}),a("div.spreadplugin-article.min-view").hover(function(){a(this).addClass("active")},function(){a(this).removeClass("active")});var b=1;a("div.spreadplugin-article.min-view").css("opacity",b).hover(function(){a(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6),a(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",.6)},function(){a(this).prevAll().stop().not(".clear,#infscr-loading").fadeTo("slow",b),a(this).nextAll().stop().not(".clear,#infscr-loading").fadeTo("slow",b)})}function o(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b="[\\?&]"+a+"=([^&#]*)",c=new RegExp(b),d=c.exec(window.location.search);return null==d?"":encodeURIComponent(decodeURIComponent(d[1].replace(/\+/g," ")))}function p(b){a(".spreadplugin-checkout-link").attr("href",b.c.u),a(".spreadplugin-checkout-link").removeAttr("title"),a(".spreadplugin-checkout span").text(b.c.q),a(".spreadplugin-cart-checkout a").attr("href",b.c.u),a.get(ajax_object.ajaxLocation,"action=myCart",function(b){if(a(".spreadplugin-cart").html(b),1==ajax_object.pageCheckoutUseIframe&&a(".spreadplugin-cart-checkout a").click(function(b){b.preventDefault();var c=a(this).attr("href");"undefined"!=typeof c&&c.length>0&&(a("#spreadplugin-items #pagination").remove(),a("#spreadplugin-items #spreadplugin-menu").remove(),a(window).unbind(".infscr"),a("#spreadplugin-list").html('<iframe style="z-index:10002" id="checkoutFrame" frameborder="0" width="900" height="2000" scroll="yes">'),a("#spreadplugin-list #checkoutFrame").attr("src",c),a("html, body").animate({scrollTop:a("#spreadplugin-items #checkoutFrame").offset().top},2e3))}),2==ajax_object.pageCheckoutUseIframe){var c=a(".spreadplugin-cart-checkout a").attr("href");"undefined"!=typeof c&&c.length>0&&a(".spreadplugin-cart-checkout a").magnificPopup({type:"iframe",callbacks:{close:function(){location.reload()}}})}a(".cart-row a.deleteCartItem").click(function(b){b.preventDefault,a(this).closest(".cart-row").show().fadeOut("slow"),a.post(ajax_object.ajaxLocation,"action=myDelete&id="+a(this).closest(".cart-row").data("id"),function(){a.post(ajax_object.ajaxLocation,"action=myAjax",function(a){p(a)},"json")})}),a(".spreadplugin-cart-close").click(function(b){b.preventDefault(),a(".spreadplugin-cart").hide()})})}function q(b,c){spreadshirt.create("tablomat",{shopId:ajax_object.designerShopId,target:document.getElementById(ajax_object.designerTargetId),platform:ajax_object.designerPlatform,locale:ajax_object.designerLocale,width:ajax_object.designerWidth,productId:b,setProductType:c,addToBasket:function(b,c){var d={article:b.product.id,size:b.size.id,appearance:b.appearance.id,quantity:b.quantity,shopId:b.shopId,action:"myAjax",type:"1"};a.post(ajax_object.ajaxLocation,d,function(a){1==a.c.m?c&&c():c&&c(!0),p(a)},"json")}},function(a,b){a&&console.log(a)})}var b="?",c=o("productCategory"),d=o("productSubCategory"),e=o("articleSortBy"),f=o("pagesp"),g=".spreadplugin-article",h="",i="",k=0;if(1==ajax_object.display&&(g=".spreadplugin-designs"),ajax_object.pageLink.indexOf("?")>-1&&(b="&"),a(".spreadplugin-cart").hide(),a(document).click(function(b){"spreadplugin-checkout-link"!=b.target.className&&"spreadplugin-checkout-link button"!=b.target.className&&a(".spreadplugin-cart").is(":visible")&&!a(".spreadplugin-cart").find(b.target).length&&a(".spreadplugin-cart").hide()}),a(".spreadplugin-items select").hover(function(a){a.stopPropagation()}),0!=a(".spreadplugin-menu").length){var n=a("#spreadplugin-menu").offset().top-parseFloat(a("#spreadplugin-menu").css("margin-top").replace(/auto/,0));a(window).scroll(function(b){var c=a(this).scrollTop();c>=n-0?(a("#spreadplugin-menu").addClass("fixed"),a("#spreadplugin-menu").css("width",a("div.spreadplugin-items").width())):(a("#spreadplugin-menu").css("width",""),a("#spreadplugin-menu").removeClass("fixed"))})}a(window).resize(function(){a(".img-caption").hide()}),1==ajax_object.infiniteScroll&&a("#spreadplugin-list").infinitescroll({nextSelector:"#spreadplugin-items #pagination a",navSelector:"#spreadplugin-items #pagination",itemSelector:"#spreadplugin-list "+g,loading:{img:ajax_object.loadingImage,msgText:ajax_object.loadingMessage,finishedMsg:ajax_object.loadingFinishedMessage},animate:!0,debug:!1,bufferPx:40},function(b){l(),m(),1==ajax_object.lazyLoad&&a("img.lazyimg").lazyload({effect:"fadeIn"});var c=a(b);a("#spreadplugin-list").isotope("appended",c,!0)}),a("#spreadplugin-items #productCategory").change(function(){c=a(this).val(),1==k?document.location=ajax_object.pageLink+(f?"pagesp/"+f+"/":"")+"productCategory/"+c:document.location=ajax_object.pageLink+b+"pagesp="+f+"&productCategory="+c+"&productSubCategory="+d+"&articleSortBy="+e}),a("#spreadplugin-items #productSubCategory").change(function(){d=a(this).val(),1==k?document.location=ajax_object.pageLink+(f?"pagesp/"+f+"/":"")+"productCategory/"+c+"/productSubCategory/"+d:document.location=ajax_object.pageLink+b+"pagesp="+f+"&productCategory="+c+"&productSubCategory="+d+"&articleSortBy="+e}),a("#spreadplugin-items #articleSortBy").change(function(){e=a(this).val(),1==k?document.location=ajax_object.pageLink+(f?"pagesp/"+f+"/":"")+"productCategory/"+c+"/productSubCategory/"+d+"/articleSortBy/"+e+"/":document.location=ajax_object.pageLink+b+"pagesp="+f+"&productCategory="+c+"&productSubCategory="+d+"&articleSortBy="+e}),a(".spreadplugin-checkout-link").click(function(b){b.preventDefault();var c=a(this).parent().next(".spreadplugin-cart");"spreadplugin-widget-cart"==c.attr("id")&&c.css("position","relative"),c.is(":hidden")?c.css("display","inline-block"):c.hide()}),a.post(ajax_object.ajaxLocation,"action=myAjax",function(a){p(a)},"json"),l(),m(),1==ajax_object.lazyLoad&&a("img.lazyimg").lazyload({effect:"fadeIn"}),a("#spreadplugin-tabs li a").click(function(){return a("#spreadplugin-tabs li").removeClass("active"),a(this).parent().addClass("active"),a(".spreadplugin-tab_content").hide(),a(a(this).parent().find("a").attr("href")).fadeIn(),!1}),"undefined"!=typeof window.Isotope&&a("#spreadplugin-list").isotope({itemSelector:".spreadplugin-item",layoutMode:"fitRows"})});